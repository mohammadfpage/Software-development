# 🧭 آموزش ساخت کلید GPG و اتصال آن به Git و GitHub

این راهنما مراحل کامل ساخت کلید GPG، اتصال آن به Git و GitHub برای امضای دیجیتال کامیت‌ها، و همچنین روش‌های غیرفعال‌سازی و حذف امضاها را توضیح می‌دهد.

---

## 💡 چرا به کلید GPG نیاز داریم؟

کلید GPG برای **تأیید هویت و امضای دیجیتال کامیت‌ها** در Git استفاده می‌شود. این کار به شما امکان می‌دهد:  
- اطمینان حاصل کنید که کامیت‌ها واقعاً از شما هستند.  
- امنیت پروژه را در مخازن عمومی مانند GitHub افزایش دهید.  
- از تغییرات غیرمجاز در کد جلوگیری کنید.  

با امضای کامیت‌ها، GitHub علامت **"Verified"** را کنار کامیت‌های شما نمایش می‌دهد که نشان‌دهنده‌ی اصالت آن‌هاست.

---

## 🔁 مراحل اصلی کار با GPG

در این بخش، مراحل ساخت، تنظیم، و استفاده از کلید GPG برای امضای کامیت‌ها توضیح داده شده است.

---

### 1. ساخت کلید GPG

برای ایجاد یک کلید GPG، دستور زیر را در ترمینال اجرا کنید:
```bash
gpg --full-generate-key
```
text- **نوع کلید را انتخاب کنید:** پیش‌فرض معمولاً RSA است.  
- **اندازه کلید را مشخص کنید:** توصیه می‌شود ۴۰۹۶ بیت انتخاب کنید.  
- **مدت اعتبار کلید را تعیین کنید:** می‌توانید بدون انقضا انتخاب کنید.  
- **اطلاعات کاربری را وارد کنید:** نام و ایمیل خود را وارد کنید.  
- **رمزعبور امن تنظیم کنید:** این رمز برای محافظت از کلید استفاده می‌شود.  

پس از اتمام، کلید ایجاد می‌شود. برای مشاهده کلیدهای خود، از دستور زیر استفاده کنید:
```bash
gpg --list-secret-keys --keyid-format=long
```
text📌 **نکته:**  
شناسه کلید (Key ID) را که به شکل یک رشته بلند (مثلاً `3AA5C34371567BD2`) است، یادداشت کنید.

---

### 2. معرفی کلید GPG به Git

برای تنظیم کلید GPG در Git، از دستور زیر استفاده کنید و به جای `YOUR_KEY_ID` شناسه کلید خود را وارد کنید:
```bash
git config --global user.signingkey YOUR_KEY_ID
```
text📘 **مثال:**
```bash
git config --global user.signingkey 3AA5C34371567BD2
```
textاین دستور به Git می‌گوید که از این کلید برای امضای کامیت‌ها استفاده کند.

---

### 3. فعال‌سازی امضای خودکار کامیت‌ها

برای اینکه تمام کامیت‌ها به‌صورت خودکار با کلید GPG امضا شوند، دستور زیر را اجرا کنید:
```bash
git config --global commit.gpgsign true
```
text📍 **توضیح:**  
این کار باعث می‌شود هر کامیت به‌طور پیش‌فرض امضا شود و نیازی به افزودن دستی گزینه `-S` در هر کامیت نداشته باشید.

---

### 4. افزودن کلید GPG به GitHub

برای اتصال کلید GPG به GitHub، مراحل زیر را دنبال کنید:  

- **کلید عمومی خود را استخراج کنید:**
```bash
gpg --armor --export YOUR_KEY_ID
```
textاین دستور کلید عمومی را در قالب متنی نمایش می‌دهد. خروجی را کپی کنید.  

- **به GitHub بروید:**  
  - به مسیر `Settings > SSH and GPG keys` بروید.  
  - روی `New GPG key` یا `Add GPG key` کلیک کنید.  
  - کلید عمومی کپی‌شده را در کادر وارد کنید و آن را ذخیره کنید.  

📌 **نکته:**  
مطمئن شوید کلید عمومی (public key) را به‌طور کامل کپی کرده‌اید، شامل خطوط `-----BEGIN PGP PUBLIC KEY BLOCK-----` و `-----END PGP PUBLIC KEY BLOCK-----`.

---

### 5. تست امضای کامیت

برای تست اینکه امضای GPG به درستی کار می‌کند، یک کامیت امضاشده ایجاد کنید:
git commit -S -m "تست کامیت امضاشده"
textسپس، به مخزن GitHub خود بروید و بررسی کنید که کامیت شما علامت **"Verified"** را نمایش می‌دهد.

📘 **مثال:**  
اگر امضا درست تنظیم شده باشد، کنار کامیت در GitHub عبارت `Verified` نمایش داده می‌شود.

---

### 6. غیرفعال‌سازی و حذف امضاها

در صورت نیاز به غیرفعال کردن یا حذف کلید GPG، می‌توانید از روش‌های زیر استفاده کنید:

#### الف. خاموش کردن امضای خودکار  
اگر نمی‌خواهید کامیت‌ها به‌صورت خودکار امضا شوند، دستور زیر را اجرا کنید:
git config --global --unset commit.gpgsign
text#### ب. حذف کلید از Git  
برای حذف کلید GPG از تنظیمات Git، از دستور زیر استفاده کنید:
git config --global --unset user.signingkey
text#### ج. حذف کلید GPG از سیستم  
برای حذف کلید GPG از سیستم خود، ابتدا کلید عمومی و خصوصی را حذف کنید:
gpg --delete-secret-key YOUR_KEY_ID
gpg --delete-key YOUR_KEY_ID
text📍 **هشدار:**  
حذف کلید خصوصی و عمومی غیرقابل بازگشت است. قبل از حذف، از کلید نسخه پشتیبان تهیه کنید.

#### د. حذف کلید از GitHub  
برای حذف کلید GPG از حساب GitHub:  
- به `Settings > SSH and GPG keys` بروید.  
- کلید GPG مورد نظر را پیدا کنید و روی `Delete` کلیک کنید.

---

## ⚙️ دستورات مهم GPG

| دستور | توضیح کوتاه |
|-------|-------------|
| `gpg --full-generate-key` | ساخت کلید GPG جدید |
| `gpg --list-secret-keys --keyid-format=long` | نمایش لیست کلیدهای GPG |
| `gpg --armor --export YOUR_KEY_ID` | استخراج کلید عمومی برای GitHub |
| `gpg --delete-secret-key YOUR_KEY_ID` | حذف کلید خصوصی |
| `gpg --delete-key YOUR_KEY_ID` | حذف کلید عمومی |

---

## 🧩 نکات اضافی

- **تهیه نسخه پشتیبان:**  
همیشه از کلیدهای خود نسخه پشتیبان تهیه کنید با استفاده از:
gpg --export-secret-keys --armor YOUR_KEY_ID > mykey.asc
text- **بازیابی کلید:**  
برای بازیابی کلید در سیستم دیگر:
gpg --import mykey.asc
text- **رفع خطا:**  
اگر با خطای امضا مواجه شدید، مطمئن شوید که:  
  - برنامه GPG به درستی نصب شده است.  
  - مسیر GPG در متغیر `PATH` سیستم تنظیم شده است.  
  - ایمیل تنظیم‌شده در Git با ایمیل کلید GPG یکسان است.  

📘 **بررسی ایمیل در Git:**
git config --global user.email
text---

✍️ **تهیه و تنظیم:** گروه دوم  
📅 **موضوع ارائه:** امضای دیجیتال کامیت‌ها با GPG  
🎓 **کاربرد:** افزایش امنیت و تأیید هویت در پروژه‌های نرم‌افزاری  
📘 **ویرایش و بازنویسی:** محمد فلاحی
